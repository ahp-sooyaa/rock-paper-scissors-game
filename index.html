<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0"> 
  <meta name="description" content="Rock-paper-scissors game with alpinejs & tailwind">

  <link rel="icon" type="image/png" sizes="32x32" href="./images/favicon-32x32.png">
  
  <title>Frontend Mentor | Rock, Paper, Scissors</title>
  <script defer src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script>

  <link rel="stylesheet" href="./build/tailwind.css">

  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link rel="preload" as="style"
      href="https://fonts.googleapis.com/css2?family=Barlow+Semi+Condensed:wght@600;700&display=swap">
  <link rel="stylesheet" onload="this.onload=null;this.removeAttribute('media');"
      href="https://fonts.googleapis.com/css2?family=Barlow+Semi+Condensed:wght@600;700&display=swap">

  <style>
    .attribution { font-size: 11px; text-align: center; }
    .attribution a { color: #71b6ff; }

    [x-cloak] {
      display: none;
    }
  </style>
</head>
<body>

  <div x-data="game()" class="flex flex-col p-7 min-h-screen text-white font-barlow-semi-condensed bg-gradient-radial from-outer-radial to-inner-radial">
      <header class="mb-5 border-2 border-gray-400 flex justify-between items-center p-2 rounded-xl">
        <div class="px-3 pt-1">
          <img src="images/logo.svg" alt="logo" class="h-16">
        </div>

        <div class="bg-white px-5 py-3 rounded-lg text-center text-gray-700">
          <h1 class="text-xs tracking-wider uppercase">Score</h1>
          <span class="text-4xl" x-text="score"></span>
        </div>
      </header>

      <main class="flex flex-col flex-1">
        <div x-show="! isPicked" class="grid grid-cols-2 place-items-center gap-y-7 mt-20">
          <div class="bg-gradient-to-b from-red-500 p-3 rounded-full to-red-400">
            <div class="bg-white grid h-24 w-24 place-items-center rounded-full">
              <img @click="pickOption('rock')" src="images/icon-rock.svg" alt="rock icon">
            </div>
          </div>

          <div class="bg-gradient-to-b from-blue-500 p-3 rounded-full to-blue-400">
            <div class="bg-white grid h-24 w-24 place-items-center rounded-full">
              <img @click="pickOption('paper')" src="images/icon-paper.svg" alt="paper icon">
            </div>
          </div>

          <div class="bg-gradient-to-b from-yellow-500 p-3 rounded-full to-yellow-400 col-start-1 col-end-3">
            <div class="bg-white grid h-24 w-24 place-items-center rounded-full">
              <img @click="pickOption('scissors')" src="images/icon-scissors.svg" alt="scissors icon">
            </div>
          </div>
        </div>

        <div x-cloak x-show="isPicked">
          <div class="flex justify-between">
            <div class="relative flex flex-col items-center w-1/2">
              <div class="bg-opacity-5 bg-white p-12 rounded-full">
                <div class="bg-opacity-5 bg-white p-10 rounded-full">
                  <div 
                    class="bg-gradient-to-b p-3 rounded-full"
                    :class="{
                      'from-red-500 to-red-400' : pickedOption == 'rock', 
                      'from-yellow-500 to-yellow-400' : pickedOption == 'scissors', 
                      'from-blue-500 to-blue-400' : pickedOption == 'paper'
                    }"  
                  >
                    <div class="bg-white grid h-24 place-items-center rounded-full w-24 col-start-1 col-end-3">
                      <img x-show="pickedOption == 'rock'" src="images/icon-rock.svg" alt="rock icon">
                      <img x-show="pickedOption == 'paper'" src="images/icon-paper.svg" alt="paper icon">
                      <img x-show="pickedOption == 'scissors'" src="images/icon-scissors.svg" alt="scissors icon">
                    </div>
                  </div>
                </div>
              </div>
              <h1 class="bottom-8 absolute mt-5 uppercase">You picked</h1>
            </div>
            <div class="overflow-hidden relative flex flex-col items-center w-1/2">
              <div class="p-12 rounded-full">
                <div class="p-10 rounded-full">
                  <div 
                    class="bg-gradient-to-b from-red-500 p-3 rounded-full to-red-400" 
                    :class="{
                      'from-red-500 to-red-400' : housePickedOption == 'rock', 
                      'from-yellow-500 to-yellow-400' : housePickedOption == 'scissors', 
                      'from-blue-500 to-blue-400' : housePickedOption == 'paper'
                    }">
                    <div class="bg-white grid h-24 place-items-center rounded-full w-24 col-start-1 col-end-3">
                      <img x-show="housePickedOption == 'rock'" src="images/icon-rock.svg" alt="rock icon">
                      <img x-show="housePickedOption == 'paper'" src="images/icon-paper.svg" alt="paper icon">
                      <img x-show="housePickedOption == 'scissors'" src="images/icon-scissors.svg" alt="scissors icon">
                    </div>
                  </div>
                </div>
              </div>
              <h1 class="bottom-8 absolute mt-5 uppercase">The House picked</h1>
            </div>
          </div>
        </div>

        <div x-cloak x-show="result" class="mb-10 flex flex-col items-center">
          <h1 x-text="result" class="font-bold mb-5 mt-5 text-5xl text-center tracking-widest uppercase"></h1>
          <button @click="restart()" class="w-2/3 bg-white font-bold px-10 py-3 rounded-xl text-gray-500 text-lg tracking-widest uppercase">Play Again</button>
        </div>

        <div class="flex justify-center mt-auto mb-10">
          <button @click="openModal = true" class="border border-gray-400 px-10 py-2.5 rounded-xl text-lg tracking-widest uppercase">Rules</button>
        </div>

        <div x-cloak x-show="openModal" class="fixed bg-white flex flex-col inset-0 justify-between px-10 py-20">
          <h1 class="font-bold text-4xl text-center text-gray-600 uppercase">Rules</h1>
          <img src="images/image-rules.svg" alt="image of Rules">
          <button class="flex justify-center">
            <img @click="openModal = false" src="images/icon-close.svg" alt="close icon" class="w-6">
          </button>
        </div>
      </main>

      <footer class="attribution">
        Challenge by <a href="https://www.frontendmentor.io?ref=challenge" target="_blank">Frontend Mentor</a>. 
        Coded by <a href="#">Aung Htet Paing</a>.
      </footer>
  </div>

  <script>
    function game() {
      return {
        options: ['rock', 'paper', 'scissors'],
        isPicked: false,
        score: 0,
        pickedOption: '',
        housePickedOption: '',
        result: '',
        openModal: false,

        pickOption(option) {
          this.pickedOption = option
          this.isPicked = true

          this.housePick()

          this.checkResult()

          if(this.result == 'You Lose' && this.score != 0) {
            this.score--
          } else if(this.result == 'You Win') {
            this.score++
          }
        },

        checkResult() {
          if(this.pickedOption == this.housePickedOption) {
            this.result = 'Draw Match'
          } else if (this.pickedOption == 'rock') {
            this.result = this.housePickedOption == 'paper' ?  'You Lose' : 'You Win'
          } else if (this.pickedOption == 'paper'){
            this.result = this.housePickedOption == 'scissors' ? 'You Lose' : 'You Win'
          } else {
            this.result = this.housePickedOption == 'rock' ? 'You Lose' : 'You Win'
          }
        },

        housePick() {
          let index = Math.floor(Math.random() * 3)
          this.housePickedOption = this.options[index]
        },

        restart() {
            this.isPicked = false
            this.pickedOption = ''
            this.housePickedOption = ''
            this.result = ''
        }
      }
    }
  </script>
</body>
</html>